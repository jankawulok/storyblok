{"version":3,"file":"index.es.js","sources":["../src/helpers/storyblokBridge.ts","../src/composables/useContent.ts","../src/composables/renderContent.ts"],"sourcesContent":["declare const window: any\n\nexport const storyblokBridge = (\n  content: { content: {}[] },\n  events: string[],\n): any => {\n  if (window.storyblok) {\n    window.storyblok.init()\n    if (Array.isArray(events) && events.length) {\n      window.storyblok.on(events, (event) => {\n        if (event.action === 'input') {\n          content.content = event.story.content\n        }\n      })\n    }\n  }\n}\n","import { useContentFactory, UseContent, Context } from '@vue-storefront/core'\nimport { ContentSearchParams } from '../types'\n\nconst search = async (\n  context: Context,\n  params: ContentSearchParams,\n): Promise<any> => {\n  return context.$sb.api.getContent(params)\n}\nconst useContent: (\n  cacheId: string,\n) => UseContent<any, ContentSearchParams> = useContentFactory<\n  any,\n  ContentSearchParams\n>({ search })\n\nexport { useContent }\n","import { RenderComponent } from '@vue-storefront/core'\nimport { Component } from '../types'\n\nconst buildImageObject = (\n  items: { image: string }[],\n  actions: { replace: boolean } = { replace: false },\n) => {\n  return items.map((item: { image }) => {\n    const { replace } = actions\n    if (item.image) {\n      const image = item.image\n      const itemObject = replace\n        ? { ...item, url: image }\n        : {\n            ...item,\n            image: {\n              url: image,\n            },\n          }\n      if (replace) delete itemObject.image\n      return itemObject\n    }\n    return item\n  })\n}\n\nexport const extractComponents = (\n  contentData: {} | [] = [],\n): RenderComponent[] => {\n  let content = contentData\n  if (!Array.isArray(contentData)) content = [content]\n  return (content as []).map((component: Component): {\n    componentName: string\n    props: any\n  } => {\n    const props = Object.keys(component).reduce(\n      (res: any, key: string) => ({\n        ...res,\n        [key]: component[key],\n      }),\n      {},\n    )\n    if (props.items && Array.isArray(props.items)) {\n      props.items = buildImageObject(props.items)\n    }\n    if (props.images && Array.isArray(props.images)) {\n      props.images = buildImageObject(props.images, { replace: true })\n    }\n    return {\n      componentName: component.component || 'CustomComponent',\n      props,\n    }\n  })\n}\n"],"names":[],"mappings":";;;IAEa,eAAe,GAAG,UAC7B,OAA0B,EAC1B,MAAgB;IAEhB,IAAI,MAAM,CAAC,SAAS,EAAE;QACpB,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,CAAA;QACvB,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE;YAC1C,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,MAAM,EAAE,UAAC,KAAK;gBAChC,IAAI,KAAK,CAAC,MAAM,KAAK,OAAO,EAAE;oBAC5B,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,CAAA;iBACtC;aACF,CAAC,CAAA;SACH;KACF;AACH;;ACbA,IAAM,MAAM,GAAG,UACb,OAAgB,EAChB,MAA2B;;QAE3B,sBAAO,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,EAAA;;KAC1C,CAAA;IACK,UAAU,GAE4B,iBAAiB,CAG3D,EAAE,MAAM,QAAA,EAAE;;ACXZ,IAAM,gBAAgB,GAAG,UACvB,KAA0B,EAC1B,OAAkD;IAAlD,wBAAA,EAAA,YAAkC,OAAO,EAAE,KAAK,EAAE;IAElD,OAAO,KAAK,CAAC,GAAG,CAAC,UAAC,IAAe;QACvB,IAAA,OAAO,GAAK,OAAO,QAAZ,CAAY;QAC3B,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;YACxB,IAAM,UAAU,GAAG,OAAO;wCACjB,IAAI,KAAE,GAAG,EAAE,KAAK,4BAEhB,IAAI,KACP,KAAK,EAAE;oBACL,GAAG,EAAE,KAAK;iBACX,GACF,CAAA;YACL,IAAI,OAAO;gBAAE,OAAO,UAAU,CAAC,KAAK,CAAA;YACpC,OAAO,UAAU,CAAA;SAClB;QACD,OAAO,IAAI,CAAA;KACZ,CAAC,CAAA;AACJ,CAAC,CAAA;IAEY,iBAAiB,GAAG,UAC/B,WAAyB;IAAzB,4BAAA,EAAA,gBAAyB;IAEzB,IAAI,OAAO,GAAG,WAAW,CAAA;IACzB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;QAAE,OAAO,GAAG,CAAC,OAAO,CAAC,CAAA;IACpD,OAAQ,OAAc,CAAC,GAAG,CAAC,UAAC,SAAoB;QAI9C,IAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CACzC,UAAC,GAAQ,EAAE,GAAW;;YAAK,8BACtB,GAAG,gBACL,GAAG,IAAG,SAAS,CAAC,GAAG,CAAC;SACrB,EACF,EAAE,CACH,CAAA;QACD,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;YAC7C,KAAK,CAAC,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;SAC5C;QACD,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE;YAC/C,KAAK,CAAC,MAAM,GAAG,gBAAgB,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAA;SACjE;QACD,OAAO;YACL,aAAa,EAAE,SAAS,CAAC,SAAS,IAAI,iBAAiB;YACvD,KAAK,OAAA;SACN,CAAA;KACF,CAAC,CAAA;AACJ;;;;"}